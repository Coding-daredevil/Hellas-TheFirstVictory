scripted_gui = {

	coc = {
		context_type = player_context
		window_name = "coc_container"
        parent_window_token = politics_tab 

		visible = { original_tag=GRE always=yes }
		
		effects = {
			coc_open_button_click = {
				if = { limit={ NOT={ has_country_flag=coc_opened }} set_country_flag=coc_opened coc_apply_filters=yes }
				else = { clr_country_flag=coc_opened }
			}
		}
		
		triggers = { 
			coc_open_button_click_enabled={ always=yes }
			coc_open_button_visible={ always=yes }
		}
		
		properties = {
			coc_open_button = {
				x=-178
				y=598
			}
		}
	} 
	coc_fs = {
		context_type = player_context
		window_name = "coc_container"
        parent_window_token = top_bar

		visible = { original_tag=GRE always=yes }
		
		effects = {
			coc_open_button_click = {
				if = { limit={ NOT={ has_country_flag=coc_opened }} set_country_flag=coc_opened coc_apply_filters=yes }
				else = { clr_country_flag=coc_opened }
			}
		}
		
		triggers = { 
			coc_open_button_click_enabled={ always=yes }
			coc_open_button_visible={ always=yes }
		}
	} 

	coc__main = {
		context_type = player_context
		
		window_name = "coc_main_window_container"
		
		visible = { has_country_flag=coc_opened }

		properties = { 
			######[Top]#####
			coc_top_portrait = { image=[GetCharacterPortrait] }
			coc_top_portrait_army_rank = { image=[GetCharacterHCRank] }
			coc_top_portrait_navy_rank = { image=[GetCharacterHCRank] }
			coc_top_portrait_air_rank = { image=[GetCharacterHCRank] }
			#####[Bottom]#####
			coc_portrait = { image=[GetCharacterPortrait] }
			coc_portrait_army_rank = { image=[GetCharacterHCRank] }
			coc_portrait_navy_rank = { image=[GetCharacterHCRank] }
			coc_portrait_air_rank = { image=[GetCharacterHCRank] }
			available_button = { frame=coc_available }
			branch_leader_button = { frame=coc_bleader }
			branch_advisor_button = { frame=coc_badvisor }
			branch_army_button = { frame=coc_barmy }
			branch_navy_button = { frame=coc_bnavy }
			branch_air_button = { frame=coc_bair }
			conditional_dead_button = { frame=coc_cdead }
			conditional_purged_button = { frame=coc_cpurged }
			conditional_surrendered_button = { frame=coc_csurrendered }
			conditional_assigned_button = { frame=coc_cassigned }
			conditional_combat_button = { frame=coc_ccombat }
			conditional_wounded_button = { frame=coc_cwounded }
			ideological_mon_button = { frame=coc_imon }
			ideological_dem_button = { frame=coc_idem }
			ideological_com_button = { frame=coc_icom }
			ideological_fas_button = { frame=coc_ifas }
			ideological_con_button = { frame=coc_icon }
			ideological_sod_button = { frame=coc_isod }
			ideological_rev_button = { frame=coc_irev }
			ideological_mfa_button = { frame=coc_imfa }
		}

		dynamic_lists = {
			coc_top_head_gridbox = { array=global.coc_head_array entry_container=coc_top_gridbox_entry change_scope=no}
			coc_top_side_gridbox = { array=global.coc_side_array entry_container=coc_top_gridbox_entry change_scope=no}
			coc_top_advisor_first_gridbox = { array=global.coc_advisor_first_array entry_container=coc_top_gridbox_entry change_scope=no}
			coc_top_advisor_second_gridbox = { array=global.coc_advisor_second_array entry_container=coc_top_gridbox_entry change_scope=no}
			coc_bottom_gridbox = {
				array=global.coc_array
				entry_container=coc_bottom_gridbox_entry
				change_scope = no
			}
		}

		triggers = { 
			coc_top_portrait_army_rank_visible = { vscope_character_is_army=yes vscope_character_hired_as_chief=no }
			coc_top_portrait_navy_rank_visible = { vscope_character_is_navy=yes vscope_character_hired_as_chief=no }
			coc_top_portrait_air_rank_visible  = { vscope_character_is_air=yes }
			#########################################################################
			coc_portrait_army_rank_visible = { vscope_character_is_army=yes }
			coc_portrait_navy_rank_visible = { vscope_character_is_navy=yes }
			coc_portrait_air_rank_visible  = { vscope_character_is_air=yes }
			###################################################################################
			available_button_visible = { check_variable={ coc_filters>0 }}
			sort_stats_button_visible = { check_variable={ coc_filters>0 }}
			negative_filters_button_visible = { check_variable={ coc_filters>0 }}
			branch_button_visible = { check_variable={ coc_filters>0 }}
			conditional_button_visible = { check_variable={ coc_filters>0 }}
			ideological_button_visible = { check_variable={ coc_filters>0 }}
			branch_leader_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_branch>0 }}
			branch_advisor_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_branch>0 }}
			branch_army_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_branch>0 }}
			branch_navy_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_branch>0 }}
			branch_air_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_branch>0 }}
			conditional_dead_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_conditional>0 }}
			conditional_purged_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_conditional>0 }}
			conditional_surrendered_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_conditional>0 }}
			conditional_assigned_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_conditional>0 }}
			conditional_assigned_button_click_enabled = { OR={ check_variable={ coc_bleader>0 } check_variable={ coc_badvisor>0 }}}
			conditional_combat_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_conditional>0 }}
			conditional_wounded_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_conditional>0 }}
			ideological_mon_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_dem_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_com_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_fas_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_con_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_sod_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_rev_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			ideological_mfa_button_visible = { check_variable={ coc_filters>0 } check_variable={ coc_ideological>0 }}
			###################################################################################
			coc_portrait_click_enabled = { vscope_character_not_psd_withtt=yes vscope_character_hired=no vscope_character_is_available_for_hire_in_high_command=yes }
			coc_portrait_right_click_enabled = { vscope_character_not_psd_withtt=yes vscope_character_hired=no vscope_character_is_available_for_hire_as_chief=yes }
			coc_portrait_dead_visible = { check_variable={ c_dead@var:v=1 }}
			coc_portrait_purged_visible = { check_variable={ c_purged@var:v=1 }}
			coc_portrait_surrendered_visible = { check_variable={ c_surrendered@var:v=1 }}
		}

		effects = {
			coc_main_close_click = { clr_country_flag=coc_opened }
			#####[Filters]#####
			all_conditional_button_click = { add_to_variable={ coc_filters=1 } set_temp_variable={ x=coc_filters } modulo_temp_variable={ x=2 } set_variable={ coc_filters=x } coc_reset_all_filters_if_back_to_all=yes coc_apply_filters=yes }
			sort_stats_button_click = { add_to_variable={ coc_sort_array=1 } set_temp_variable={ x=coc_sort_array } modulo_temp_variable={ x=6 } set_variable={ coc_sort_array=x } coc_apply_filters=yes }
			sort_stats_button_right_click = { subtract_from_variable={ coc_sort_array=1 } if={limit={check_variable={ coc_sort_array<0 }} set_variable={ coc_sort_array=5 }} set_temp_variable={ x=coc_sort_array } modulo_temp_variable={ x=6 } set_variable={ coc_sort_array=x } coc_apply_filters=yes }
			negative_filters_button_click = { add_to_variable={ coc_reverted_filters=1 } set_temp_variable={ x=coc_reverted_filters } modulo_temp_variable={ x=2 } set_variable={ coc_reverted_filters=x } coc_apply_filters=yes }
			branch_button_click = { add_to_variable={ coc_branch=1 } set_temp_variable={ x=coc_branch } modulo_temp_variable={ x=2 } set_variable={ coc_branch=x } coc_reset_branch_filters_if_zero=yes coc_apply_filters=yes }
			conditional_button_click = { add_to_variable={ coc_conditional=1 } set_temp_variable={ x=coc_conditional } modulo_temp_variable={ x=2 } set_variable={ coc_conditional=x } coc_reset_conditional_filters_if_zero=yes coc_apply_filters=yes }
			ideological_button_click = { add_to_variable={ coc_ideological=1 } set_temp_variable={ x=coc_ideological } modulo_temp_variable={ x=2 } set_variable={ coc_ideological=x } coc_reset_ideological_filters_if_zero=yes coc_apply_filters=yes }
			available_button_click = { add_to_variable={ coc_available=2 } set_temp_variable={ x=coc_available } modulo_temp_variable={ x=4 } set_variable={ coc_available=x } coc_apply_filters=yes }
			branch_leader_button_click = { add_to_variable={ coc_bleader=2 } set_temp_variable={ x=coc_bleader } modulo_temp_variable={ x=4 } set_variable={ coc_bleader=x } coc_apply_filters=yes }
			branch_advisor_button_click = { add_to_variable={ coc_badvisor=2 } set_temp_variable={ x=coc_badvisor } modulo_temp_variable={ x=4 } set_variable={ coc_badvisor=x } coc_apply_filters=yes }
			branch_army_button_click = { add_to_variable={ coc_barmy=2 } set_temp_variable={ x=coc_barmy } modulo_temp_variable={ x=4 } set_variable={ coc_barmy=x } coc_apply_filters=yes }
			branch_navy_button_click = { add_to_variable={ coc_bnavy=2 } set_temp_variable={ x=coc_bnavy } modulo_temp_variable={ x=4 } set_variable={ coc_bnavy=x } coc_apply_filters=yes }
			branch_air_button_click = { add_to_variable={ coc_bair=2 } set_temp_variable={ x=coc_bair } modulo_temp_variable={ x=4 } set_variable={ coc_bair=x } coc_apply_filters=yes }
			conditional_dead_button_click = { add_to_variable={ coc_cdead=2 } set_temp_variable={ x=coc_cdead } modulo_temp_variable={ x=4 } set_variable={ coc_cdead=x } coc_apply_filters=yes }
			conditional_purged_button_click = { add_to_variable={ coc_cpurged=2 } set_temp_variable={ x=coc_cpurged } modulo_temp_variable={ x=4 } set_variable={ coc_cpurged=x } coc_apply_filters=yes }
			conditional_surrendered_button_click = { add_to_variable={ coc_csurrendered=2 } set_temp_variable={ x=coc_csurrendered } modulo_temp_variable={ x=4 } set_variable={ coc_csurrendered=x } coc_apply_filters=yes }
			conditional_assigned_button_click = { add_to_variable={ coc_cassigned=2 } set_temp_variable={ x=coc_cassigned } modulo_temp_variable={ x=4 } set_variable={ coc_cassigned=x } coc_apply_filters=yes }
			conditional_combat_button_click = { add_to_variable={ coc_ccombat=2 } set_temp_variable={ x=coc_ccombat } modulo_temp_variable={ x=4 } set_variable={ coc_ccombat=x } coc_apply_filters=yes }
			conditional_wounded_button_click = { add_to_variable={ coc_cwounded=2 } set_temp_variable={ x=coc_cwounded } modulo_temp_variable={ x=4 } set_variable={ coc_cwounded=x } coc_apply_filters=yes }
			ideological_mon_button_click = { add_to_variable={ coc_imon=2 } set_temp_variable={ x=coc_imon } modulo_temp_variable={ x=4 } set_variable={ coc_imon=x } coc_apply_filters=yes }
			ideological_dem_button_click = { add_to_variable={ coc_idem=2 } set_temp_variable={ x=coc_idem } modulo_temp_variable={ x=4 } set_variable={ coc_idem=x } coc_apply_filters=yes }
			ideological_com_button_click = { add_to_variable={ coc_icom=2 } set_temp_variable={ x=coc_icom } modulo_temp_variable={ x=4 } set_variable={ coc_icom=x } coc_apply_filters=yes }
			ideological_fas_button_click = { add_to_variable={ coc_ifas=2 } set_temp_variable={ x=coc_ifas } modulo_temp_variable={ x=4 } set_variable={ coc_ifas=x } coc_apply_filters=yes }
			ideological_con_button_click = { add_to_variable={ coc_icon=2 } set_temp_variable={ x=coc_icon } modulo_temp_variable={ x=4 } set_variable={ coc_icon=x } coc_apply_filters=yes }
			ideological_sod_button_click = { add_to_variable={ coc_isod=2 } set_temp_variable={ x=coc_isod } modulo_temp_variable={ x=4 } set_variable={ coc_isod=x } coc_apply_filters=yes }
			ideological_rev_button_click = { add_to_variable={ coc_irev=2 } set_temp_variable={ x=coc_irev } modulo_temp_variable={ x=4 } set_variable={ coc_irev=x } coc_apply_filters=yes }
			ideological_mfa_button_click = { add_to_variable={ coc_imfa=2 } set_temp_variable={ x=coc_imfa } modulo_temp_variable={ x=4 } set_variable={ coc_imfa=x } coc_apply_filters=yes }
			#####[Top Portraits]#####
			coc_top_portrait_click = { deactivate_targeted_character=yes }
			#####[Bottom Portraits]#####
			coc_portrait_click = { if={ limit={ vscope_character_is_available_for_hire_in_high_command=yes } hidden_effect={ hire_targeted_character_in_high_command=yes }}}
			coc_portrait_right_click = { if={ limit={ vscope_character_is_available_for_hire_as_chief=yes } hidden_effect={ hire_targeted_character_as_chief=yes }}}
			coc_portrait_army_rank_click = { var:v={ increase_officer_rank=yes }}
		}
	}
}