scripted_gui = {
	faction_gui = {
		context_type = decision_category
		window_name = "faction_gui_container"

		dynamic_lists = {
			faction_dem_grid = {
				array = faction_dem_array
				index = faction_main_index
				change_scope = no
				entry_container = faction_dem_entry
			}
			faction_com_grid = {
				array = faction_com_array
				index = faction_main_index
				change_scope = no
				entry_container = faction_com_entry
			}   
			faction_fas_grid = {
				array = faction_fas_array
				index = faction_main_index
				change_scope = no
				entry_container = faction_fas_entry
			} 
			faction_mon_grid = {
				array = faction_mon_array
				index = faction_main_index
				change_scope = no
				entry_container = faction_mon_entry
			}             
			faction_member_grid = {
				array = faction_member_array
				index = faction_member_index
				change_scope = no
				entry_container = faction_member_entry
			}

			faction_com_m_grid = {
				array = faction_com_m_array
				index = faction_member_index
				change_scope = no
				entry_container = faction_com_m_entry
			}            
		}

		properties = {
			faction_main_icon = {
				frame = v
			}
			faction_semicircle_main_icon = {
				frame = v
				x = faction_x_array^faction_main_index
				y = faction_y_array^faction_main_index
			}
			faction_member_icon = {
				frame = v
			}
		}
        
        effects = {
			icon_democrats_click = {
				if = {
					limit = { NOT = { has_country_flag = faction_gui_extra_opened } }
					set_country_flag = faction_gui_extra_opened
				}
				else = {
					clr_country_flag = faction_gui_extra_opened
				}
			}
            icon_communists_click = {
				if = {
					limit = { NOT = { has_country_flag = faction_gui_extra_opened } }
					set_country_flag = faction_gui_extra_opened
				}
				else = {
					clr_country_flag = faction_gui_extra_opened
				}
			}
            icon_fascists_click = {
				if = {
					limit = { NOT = { has_country_flag = faction_gui_extra_opened } }
					set_country_flag = faction_gui_extra_opened
				}
				else = {
					clr_country_flag = faction_gui_extra_opened
				}
			}
            icon_monarchists_click = {
				if = {
					limit = { NOT = { has_country_flag = faction_gui_extra_opened } }
					set_country_flag = faction_gui_extra_opened
				}
				else = {
					clr_country_flag = faction_gui_extra_opened
				}
			}
		}
	}
    
    faction_gui_main = {
		context_type = player_context
		
		window_name = "faction_gui_container_main"
		
		visible = {
            has_country_flag = faction_gui_extra_opened
		}
        
        effects = {
			faction_gui_container_main_close_click = {
				clr_country_flag = faction_gui_extra_opened
			}
		}
        
        triggers = {
            icon_zachariadis_arrested_visible = {
                any_character={ is_character=GRE_nikos_zachariadis check_variable={ purged=1 }}
            }
			icon_fascists_assimilated_visible = {
                has_country_flag = metaxas_assimilated_fascists
            }
		}
    }
}
